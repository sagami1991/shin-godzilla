{"version":3,"sources":["websocket/RankingController.ts"],"names":[],"mappings":";AAEA,sBAAyB,gBAAgB,CAAC,CAAA;AAG1C;IACC,2BAAoB,IAAe,EAAU,WAAwB;QAAjD,SAAI,GAAJ,IAAI,CAAW;QAAU,gBAAW,GAAX,WAAW,CAAa;IACrE,CAAC;IAEM,gCAAI,GAAX;QAAA,iBAGC;QAFA,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,UAAA,EAAE,IAAI,OAAA,KAAI,CAAC,WAAW,CAAC,EAAE,CAAC,EAApB,CAAoB,CAAC,CAAC;QACxD,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,kBAAU,CAAC,OAAO,EAAE,UAAA,EAAE,IAAI,OAAA,KAAI,CAAC,WAAW,CAAC,EAAE,CAAC,EAApB,CAAoB,CAAC,CAAC;IACzE,CAAC;IAEO,uCAAW,GAAnB,UAAoB,EAAa;QAAjC,iBAIC;QAHA,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,UAAA,KAAK;YACtC,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,kBAAU,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;IACJ,CAAC;IACF,wBAAC;AAAD,CAdA,AAcC,IAAA;AAdY,yBAAiB,oBAc7B,CAAA","file":"websocket/RankingController.js","sourcesContent":["import * as WebSocket from 'ws';\r\nimport {WSWrapper} from \"./WebSocketWrapper\";\r\nimport {SocketType} from \"../share/share\";\r\nimport {UserService} from \"../service/UserService\";\r\n\r\nexport class RankingController {\r\n\tconstructor(private main: WSWrapper, private userService: UserService) {\r\n\t}\r\n\r\n\tpublic init() {\r\n\t\tthis.main.addConnectListner(ws => this.sendRanking(ws));\r\n\t\tthis.main.addMsgListner(SocketType.ranking, ws => this.sendRanking(ws));\r\n\t}\r\n\r\n\tprivate sendRanking(ws: WebSocket) {\r\n\t\tthis.userService.getRanker().then(users => {\r\n\t\t\tthis.main.send(ws, SocketType.ranking, users);\r\n\t\t});\r\n\t}\r\n}"],"sourceRoot":"/source/"}